### BPS

<http://doc.primeton.com/pages/viewpage.action?pageId=426009> 

* 普元业务流程平台套件（Primeton BPS:Business Process Suite，简称普元流程平台）
* 良好的事件驱动式系统架构、优化的BPS数据库、历史数据与运行数据分离、集群高速缓存等

##### BPS参考模型

![1586845490764](C:\Users\Maktub\Documents\Notes\0-picture\BPS参考模型.png)

##### 业务概念

###### 工作列表

###### 表单

* BPS在开始图元和人工活动图元上提供了表单设计功能

  开始图元上的表单被称之为“启动表单”，主要完成在流程实例启动前需要与参与者做的一些交互工作

###### 流程版本

* 方便管理同一流程名称下的多个业务流程 进而区分的标志

###### 触发事件

* 流程实例运行过程中插入的一些用户自定义动作，类似于数据库中的触发器

  * 触发时机

    启动、结束、超时等可插入点

  * 触发动作

    在插入点可以插入的操做

  BPS包含流程级、活动级和工作项级三个层次的触发事件

###### 回退

* 流程运行过程中按照某种规则回到流程以前的某种状态的操作，BPS支持“单步”、“按路径”、“回退到上一人工活动”等多种回退方式
* 与回退相关的一个概念是业务补偿。业务补偿一般是用户自定义的除了流程自身状态之外的复原操作，BPS中，用户可以自定义业务补偿操作

###### 代理

* 代理是BPS中定义的一种任务委派机制。它从规则的角度定义了某种委托办理规则，对于委托人拥有的符合规则的每一个任务(工作项)，代理人都有执行权限
* 根据代理规则定义方式的不同，代理分为全部代理和部分代理

###### 代办

* 代办是BPS中定义的一种任务委派机制，通过代办，委托人可以把单个任务代办给代办人
* 代办和代理的区别
  * 代理定义的是规则（其委派范围包括满足条件的所有任务），代办是针对单个任务进行的。

###### 协办

###### 交接

###### 改派

* 管理员在任务运行时动态改变任务的执行者，可以把任务改派给单个或多个参与者；如果任务是待执行状态，而被改派给多个参与者的话，任务将会变成待领取状态

###### 自由派

* 所谓”自由派“是指当一个活动运行完成后，将被启动、运行的后续活动不是由引擎根据流程图元间连接上的条件判断决定的，而是由当前活动的参与者根据流程定义时的设置，在”可选择的活动范围内“动态指定，可以是一个也可以是多个

###### 多子流程

* BPS处理复杂的业务嵌套场景的一种解决方案
  * 明确型：主业务流程在某个活动点需要产生多个子流程实例
  * 模糊幸：业务需要“在部分活动间流转”的需求时
* 在主流程中使用多子流程的方式调用该子流程

###### 聚合模式

* 表示一个流程中某活动得以触发的方式
  * 全部聚合（AND）
    * 表示该活动必须等到它的所有前驱活动全部完成才可以触发
  * 单一聚合（XOR）
    * 表示当该活动若干前驱活动中只要有一个满足条件的活动的完成，该活动即可被触发
  * 多路聚合（OR）
    * 表示该活动必须等到它的所有满足条件的前驱活动全部完成才可以触发。满足条件的前驱活动包括
      * 它与该活动的连线是“默认值”
      * 它与该活动连线上的条件为“true”

###### 分支模式

* 表示该活动结束后，它的后继活动的触发情况。

  * 全部分支（AND）

    * 该活动结束后的所有后继活动同时被触发

  * 单一分支（XOR）

    * 引擎会根据由该活动“射出”的连接线上的条件进行判断，决定该触发哪个后继活动。

      * 满足条件的连接线所指的活动被触发

      * 如果有若干个连接线上的条件都满足，那么比较连接线上的优先级，优先级高的那条连接线所指的活动将被触发

      * 如果连接线上的条件都不满足，那么取“默认值”的那条连接线所指的活动将被触发

        > 活动的“分支模式”为“单一分支”时，由它射出的连接线有且只有一条线的取值是“默认值”

  * 多路分支（OR）

    * 引擎会根据由该活动“射出“的连接线上的条件进行判断，决定触发哪个或哪些后续活动。
      * 如果连接线上取“默认值”，那么由此连接线所指的后继活动会被触发
      * 如果连接线上的条件满足，那么由此连接线所指的后继活动会被触发

###### 业务变量

* 用户通过业务化的语言表达的一些规则参数或变量，方便在业务化建模过程中理解和使用。其主要用于业务规则和分支连线的简单表达式中。用户可能通过业务资源编辑器创建全局的业务变量。还可以通过流程建模过程，创建仅用于流程内部的业务变量
* 一个业务变量对象在构成上通过由以下属性构成
  * ID
  * 名称
  * XPath
  * 业务化描述

###### 业务规则

* 业务规则是对条件表达式和计算规则的业务化描述。在BPS产品中，业务规则分为两类，分支规则和参与者规则。分别使用在分支连线属性设置和业务流程活动的参与者属性设置中。可以通过业务资源编辑器创建一个新的分支规则或参与者规则，并且使用内置的规则编辑器对其进行设计

###### 业务操作

* 业务操作是指经过业务化包装并实现的一个独立的业务功能逻辑。在BPS产品中，您可以快速地把业务操作通过流程建模设计组装为自动活动，同时还可以将业务操作作为环节的触发事件
* 业务操作的技术实现可以是无参的Java方法

###### 工作日历

* 工作日历是对业务流程参与者工作时间的模型化定义，一个工作日历可以是一个常规的工作时间，也可以根据企业需要定义一个详细的工作时间段，BPS产品提供了快速定义参与者工作时间模型的工具，并将其与参与者或流程模板进行关联。其主要使用范围为流程定义、活动时间限制设置等

###### 人工任务

* 人工任务是对业务流程中需要人工干预环节的业务化包装，其通常指向一个与用户交互的表单。在BPS Process Composer中，用户可以把人工任务组装成人工环节。一个人工任务的技术实现可以是一个JSP、一般的URL

###### 业务资源

* BPS为了支持流程的业务化定制而将业务流程中所使用到的要素的业务化包装，使得业务人员无需理解该要素的技术细节，而只需要关注其业务属性并使用，比如对自动活动所调用的业务处理逻辑（可以是一个Java方法）包装为一个“业务操作”，业务流程配置员只需要根据其业务化的名称、功能描述等属性就可以进行选择和使用
* BPS6.1中，业务资源包括人工任务、业务操作、业务规则、业务变量、工作日志

###### 催办

* 管理员督促任务的参与者加快任务处理速度，管理员可以对流程实例，工作项进行多次催办，并填写催办原因

###### 批注

* 管理员可以对流程实例或工作项添加批注信息，用以对流程实例或工作项编著提示信息、注意事项等

---

##### 开发过程（T2B）

* Tech（技术实现）-to-Business（业务调整）：模式流程实现过程

  * 从技术实现到后期运维阶段的业务调整的全过程

  1. 最终用户**业务分析人员**提出业务需求（包括用户需求文档、梳理的Visio流程图等）
  2. 开发商**需求分析人员**分析需求
  3. 开发商**设计开发人员**进行流程应用设计开发
  4. 开发商**实施团队**进行应用部署上线
  5. 系统运行和维护，最终用户**业务管理员**进行管理和监控、分析
  6. (系统运行一段时间后)发生业务变更时最终用户**业务流程配置员**进行流程调整
  7. 若需要技术实现需要返回开发商**设计开发人员**或**实施团队**实现
  8. 最终用户**业务流程配置员**基于重新实现的内容进行部署、流程调整等。

* BPS提供了实现业务流程整个生命周期的支持，包括业务流程的建模模拟、流程设计建模、开发与测试、部署发布、运行、管理监控、流程优化与调整

  ![1586853546255](C:\Users\Maktub\Documents\Notes\0-picture\T2B.png)

###### 1. 流程梳理

* 流程梳理阶段是指业务流程实现之前，根据组织所属的业务领域的特征及其业务类型，对其相关的业务流程进行梳理

  > 该过程目前不在BPS所提供的集成环境中进行，而是用户通过其他工具完成，比如MS Visio等

  1. 规划组织流程框架

     从组织的高端主流程进行规划，一般包括核心流程（比如研发流程、订单履行流程、客户服务流程）、管理流程（战略规划流程、风险管理流程、预算与控制历程）、支持流程（HR流程）等，逐步形成组织的流程框架（或称流程地图）

  2. 梳理业务流程和业务活动

     进而梳理一级流程和二级流程。具体级别没有一个确切的定论，根据组织的业务特点有所不同

  3. 编制操作规范与作业指导书

     通过堆业务流程和业务活动的梳理之后，在流程的实际运转过程中往往需要一些操作规范、作业指导书和相关模板与CheckList的支持，该过程就是梳理这些内容

###### 2. 流程建模模拟

* 在流程开发与测试之前先对业务流程进行建模并通过BPS提供的活动表单的功能进行模拟执行，借此对前面梳理的流程进行可行性和正确性验证。
  1. 组织机构规划
  2. 业务流程建模
  3. 流程模拟运行

###### 3. 架构设计建模

###### 4. 流程设计建模

###### 5. 开发测试

###### 6. 部署发布

###### 7. 运行管理监控

###### 8. 业务流程调整

____



